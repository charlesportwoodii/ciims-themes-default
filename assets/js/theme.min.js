var Theme={endPoint:$("#endpoint").attr("data-attr-endpoint")+"/",profileComments:function(e){$("#ciims_comments").html("<div class='comment_messages'><div class='clearfix'></div></div><div class='comments_container' style='display:none'></div>");var t='<div class="comment template"><div class="pull-left comment_person"></div><div class="pull-left comment_body"><div class="comment_body_byline"></div><div class="comment_body_inner"></div></div><div class="clearfix"></div></div>';$(".comments_container").append(t),$.get(Theme.endPoint+"/api/comment/user/id/"+e,function(e){$.each(e.response,function(){var e=this,t=$(".comment.template").clone(),n=$("<img>").attr({src:"http://www.gravatar.com/avatar/"+md5(e.user.email)+"?s=30"});$(t).removeClass("template").find(".comment_person").append($(n));var a=$("<span class='author'><a href='"+endpoint+"/profile/"+e.user_id+"'>"+e.user.displayName+"</a></span>"),o=new Date(1e3*e.created),i=o.format("c"),s=$("<span class='timeago' title='"+i+"'>"+i+"</span>"),d=$("<a href='"+endpoint+"/"+e.content.slug+"'>"+e.content.title+"</a>");$(t).find(".comment_body_byline").append($(a)).append(" &#183; ").append($(d)).append(" &#183; ").append($(s)),$(t).find(".comment_body_inner").html(marked(e.comment)),$(".comments_container").append(t)}),$(".comments_container").show(),$(".timeago").timeago(),$(".loader").remove()})},Blog:{likeBox:function(e){$(".comment-container").click(function(e){return e.preventDefault(),window.location="#comments",!1}),$(".likes-container").click(function(e){e.preventDefault(),$(this).find("a").click()}),$("[id ^='upvote']").click(function(t){return t.preventDefault(),$.post(Theme.endPoint+"/content/like/id/"+e,function(e){if(void 0==e.status&&(window.location=Theme.endPoint+"/login"),"success"==e.status){var t=parseInt($("#like-count").text());"inc"==e.type?$("[id ^='like-count']").text(t+1).parent().parent().parent().addClass("liked"):$("[id ^='like-count']").text(t-1).parent().parent().parent().removeClass("liked")}}),!1})},marked:function(){marked.setOptions({gfm:!0,highlight:function(e,t){return hljs.highlightAuto(e,t).value},tables:!0,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!0,smartypants:!0,langPrefix:"lang-"});var e=marked($("#markdown").val());$("#md-output").html(e),$("#md-output a").attr("rel","nofollow").attr("target","_blank")}},infScroll:function(e){var t=e.options.path.join(e.options.state.currPage);analytics.pageview(t)},load:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$(".comment-container").click(function(e){return e.preventDefault(),window.location=$(this).find("a").attr("href"),!1}),$(".nav-item").click(function(){$(".top-navigation").slideToggle()})},loadAll:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$(window).unbind(".infscr")},loadBlog:function(e){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),Theme.Blog.marked(),Theme.Blog.likeBox(e)},loadRegister:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),Theme.zxcvbn()},zxcvbn:function(){void 0!=$("#password").val()&&$("#password").val().length>0&&setTimeout(function(){$("#password, #password_repeat").keyup()},200),$("#password, #password_repeat").keyup(function(){var e="password"==$(this).attr("id")?"password_strength_1":"password_strength_2",t=zxcvbn($(this).val()).score;(1>=t||8>=$(this).val().length)&&$("#"+e).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").css("width","25%"),2==t?$("#"+e).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("poor").css("width","50%"):3==t?$("#"+e).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("good").css("width","75%"):4==t?$("#"+e).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").addClass("great").css("width","100%"):$("#"+e).find(".password_strength").removeClass("great").removeClass("good").removeClass("poor").css("width","25%")})},Callbacks:{getTweets:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$.get(Theme.endPoint+"/api/theme/callback/theme/default/method/getTweets",function(e){var t=$('<ul id="tweet-list"></ul>');200==e.status?$(e.response).each(function(){var e=$("<li></li>"),n=new Date($(this)[0].created_at),a=$(this)[0].text;$(e).append($("<p></p>").addClass("date").html(n.toDateString())),$(e).append($("<p></p>").html(a)),$(t).append(e)}):$(t).append($("<li></li>").html(e.message)),$("#twitterFeed").append(t)})},getFacebookPosts:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$.get(Theme.endPoint+"/api/theme/callback/theme/default/method/getFacebookPosts",function(e){var t=$('<ul id="fb-list"></ul>');200==e.status?$(e.response.data).each(function(){var e=$("<li></li>"),n=this.story,a=new Date(this.created_time);$(e).append($("<p></p>").addClass("date").html(a.toDateString())),$(e).append($("<p></p>").html(n)),$(t).append(e)}):$(t).append($("<li></li>").html(e.message)),$("#fbFeed").append(t)})},getGooglePlusActivities:function(){Theme.endPoint=$("#endpoint").attr("data-attr-endpoint"),$.get(Theme.endPoint+"/api/theme/callback/theme/default/method/getGooglePlusPosts",function(e){var t=$('<ul id="gp-list"></ul>');200==e.status?$.each(e.response,function(e,n){var a=$("<li></li>"),o=$("<a>").text(n.title).attr("href",n.url),i=new Date(this.published);$(a).append($("<p></p>").addClass("date").html(i.toDateString())),$(a).append($("<p></p>").html(o)),$(t).append(a)}):$(t).append($("<li></li>").html(e.message)),$("#gpFeed").append(t)})}}};